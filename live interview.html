<video id="live-video" autoplay muted playsinline width="320" height="240"></video>
<button id="start-recording">Start Recording</button>
<button id="stop-recording" disabled>Stop Recording</button>
<div id="recording-status"></div>
<script>
  let mediaRecorder;
  let recordedChunks = [];
  const videoElem = document.getElementById('live-video');
  const startBtn = document.getElementById('start-recording');
  const stopBtn = document.getElementById('stop-recording');
  const statusDiv = document.getElementById('recording-status');

  async function startCamera() {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
      videoElem.srcObject = stream;
      mediaRecorder = new MediaRecorder(stream);
      mediaRecorder.ondataavailable = event => {
        if (event.data.size > 0) recordedChunks.push(event.data);
      };
      mediaRecorder.onstop = () => {
        const blob = new Blob(recordedChunks, { type: 'video/webm' });
        recordedChunks = [];
        // You can upload blob to server or allow download
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'interview_recording.webm';
        a.textContent = 'Download Recording';
        statusDiv.innerHTML = '';
        statusDiv.appendChild(a);
      };
    } catch (err) {
      alert('Error accessing camera/microphone: ' + err.message);
    }
  }

  startBtn.addEventListener('click', () => {
    if (!mediaRecorder) {
      alert('Camera not started yet.');
      return;
    }
    mediaRecorder.start();
    startBtn.disabled = true;
    stopBtn.disabled = false;
    statusDiv.textContent = 'Recording...';
  });

  stopBtn.addEventListener('click', () => {
    mediaRecorder.stop();
    startBtn.disabled = false;
    stopBtn.disabled = true;
    statusDiv.textContent = 'Processing recording...';
  });

  startCamera();
</script>